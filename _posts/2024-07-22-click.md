---
title: "[Python] click ëª¨ë“ˆ ê°„ë‹¨ ì‚¬ìš©ë²•"
excerpt: "Python Click ëª¨ë“ˆë¡œ CLI í”„ë¡œê·¸ë¨ ì‘ì„±í•˜ê¸°"
categories:
  - Python
tags:
  - click
  - debugging
last_modified_at: 2024-07-22
---

> Click Documention: [https://click.palletsprojects.com/en/8.1.x/](https://click.palletsprojects.com/en/8.1.x/)

# Intro

- Pythonì—ì„œ CLI(Command Line Interface) í”„ë¡œê·¸ë¨ì„ ì‰½ê²Œ ì‘ì„±í•  ìˆ˜ ìˆëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ `click` ì†Œê°œ.
- `click`ì€ ë³µì¡í•œ ëª…ë ¹ì–´ ì²˜ë¦¬ì™€ ì˜µì…˜ parsingì„ ê°„ë‹¨í•˜ê²Œ êµ¬í˜„í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì¤€ë‹¤.
- `click.group()`, `click.command()`, `add_command()` ê¸°ëŠ¥ê³¼ ì´ë¥¼ ì´ìš©í•œ ì˜ˆì œë¥¼ í†µí•´ CLI í”„ë¡œê·¸ë¨ì„ ì‘ì„±í•˜ê³  VS Codeì—ì„œ ë””ë²„ê¹…í•˜ëŠ” ë°©ë²•ì„ ì•Œì•„ë³´ì.

<br>

# 1. Click ëª¨ë“ˆ ì†Œê°œ

## 1) `click.group()`

`click.group()`ì€ ì—¬ëŸ¬ ëª…ë ¹ì–´ë¥¼ ê·¸ë£¹ìœ¼ë¡œ ë¬¶ì„ ë•Œ ì‚¬ìš©í•œë‹¤. ì´ë¥¼ í†µí•´ ëª…ë ¹ì–´ë“¤ì„ ì²´ê³„ì ìœ¼ë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆë‹¤. ì£¼ë¡œ ìµœìƒìœ„ ê·¸ë£¹ì„ ì •ì˜í•˜ëŠ” ë° ì‚¬ìš©ë˜ì§€ë§Œ, í•˜ìœ„ ê·¸ë£¹ì„ ì¶”ê°€í•˜ì—¬ ë³µì¡í•œ êµ¬ì¡°ë„ ë§Œë“¤ ìˆ˜ ìˆë‹¤.

## 2) `click.command()`

`click.command()`ëŠ” ê°œë³„ ëª…ë ¹ì–´ë¥¼ ì •ì˜í•˜ëŠ” ë° ì‚¬ìš©í•œë‹¤. ê° ëª…ë ¹ì–´ëŠ” ë…ë¦½ì ìœ¼ë¡œ ì‹¤í–‰ë  ìˆ˜ ìˆìœ¼ë©°, ëª…ë ¹ì–´ ì‹¤í–‰ ì‹œ ìˆ˜í–‰í•  ì‘ì—…ì„ ì •ì˜í•œë‹¤.

## 3) `click.add_command()`

`click.add_command()`ëŠ” ì •ì˜í•œ ëª…ë ¹ì–´ë¥¼ ê·¸ë£¹ì— ì¶”ê°€í•˜ëŠ” ë° ì‚¬ìš©ëœë‹¤. ì´ ë©”ì„œë“œë¥¼ í†µí•´ ëª…ë ¹ì–´ë¥¼ ëª…ì‹œì ìœ¼ë¡œ ê·¸ë£¹ì— í¬í•¨ì‹œí‚¬ ìˆ˜ ìˆë‹¤.

<br>

# 2. `click.command()`ì™€ `click.add_command()`ì˜ ì„ íƒ
click.command()ì™€ click.add_command()ëŠ” ê°œë³„ ëª…ë ¹ì–´ë¥¼ ê·¸ë£¹ì— ì¶”ê°€í•  ë•Œ ì‚¬ìš©í•˜ëŠ” ë‘ ê°€ì§€ ë°©ë²•ì´ë‹¤. ì´ ë‘ ë°©ë²• ì¤‘ í•˜ë‚˜ë§Œ ì„ íƒí•´ì„œ ì‚¬ìš©í•˜ë©´ ëœë‹¤. ë™ì¼í•œ ëª…ë ¹ì–´ì— ëŒ€í•´ ë‘ ë°©ë²•ì„ ë™ì‹œì— ì‚¬ìš©í•  í•„ìš”ëŠ” ì—†ë‹¤.

## 1) `click.command()`
- ë°ì½”ë ˆì´í„°ë¥¼ ì‚¬ìš©í•˜ì—¬ í•¨ìˆ˜(ê°œë³„ ëª…ë ¹ì–´ ë˜ëŠ” ê·¸ë£¹)ë¥¼ ê·¸ë£¹ì— ìë™ìœ¼ë¡œ ì¶”ê°€í•œë‹¤.
- ì¥ì : ê°„ê²°í•˜ê³  ì§ê´€ì . í•¨ìˆ˜ ë°”ë¡œ ìœ„ì— ëª…ë ¹ì–´ ì •ì˜ë¥¼ ëª…ì‹œí•  ìˆ˜ ìˆì–´ ê°€ë…ì„±ì´ ì¢‹ë‹¤.

```python
import click


@click.group(name='main')
def cli() -> None:
    pass

@cli.command()
def hello() -> None:
    click.echo("Hello, World!")
```

## 2) `click.add_command()`
- ëª…ì‹œì ìœ¼ë¡œ í•¨ìˆ˜(ê°œë³„ ëª…ë ¹ì–´)ë¥¼ ê·¸ë£¹ì— ìˆ˜ë™ìœ¼ë¡œ ì¶”ê°€í•œë‹¤.
- ì¥ì : ëª…ë ¹ì–´ ì •ì˜ì™€ ê·¸ë£¹ ì¶”ê°€ë¥¼ ë¶„ë¦¬í•  ìˆ˜ ìˆì–´ ìœ ì—°ì„±ì´ ë†’ë‹¤. ì—¬ëŸ¬ ëª…ë ¹ì–´ë¥¼ í•œêº¼ë²ˆì— ì¶”ê°€í•˜ê±°ë‚˜ ì¡°ê±´ì— ë”°ë¼ ì¶”ê°€í•  ë•Œ ìœ ìš©í•˜ë‹¤.

```python
import click


@click.group(name='main')
def cli() -> None:
    pass

@click.command()
def hello() -> None:
    click.echo("Hello, World!")

cli.add_command(hello)
```

## âœï¸ ì •ë¦¬
- ê·¸ë£¹ì„ ê·¸ë£¹ì— ì¶”ê°€:
    - ë°˜ë“œì‹œ `click.add_command()` ë©”ì„œë“œë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤.
    - Ex) `cli.add_command(sub_group)`
- ê°œë³„ ëª…ë ¹ì–´ë¥¼ ê·¸ë£¹ì— ì¶”ê°€:
    - ë°ì½”ë ˆì´í„° ë°©ì‹(`@cli.command()`)ì„ ì‚¬ìš©í•˜ë©´ `click.add_command()`ë¥¼ ëª…ì‹œì ìœ¼ë¡œ ì‚¬ìš©í•˜ì§€ ì•Šì•„ë„ ëœë‹¤.
    - ë§Œì•½ í•¨ìˆ˜ë¡œ ì •ì˜ëœ ëª…ë ¹ì–´ë¥¼ ëª…ì‹œì ìœ¼ë¡œ ì¶”ê°€í•˜ê³  ì‹¶ë‹¤ë©´ `click.add_command()`ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

<br>

# 3. ì˜ˆì œ ì½”ë“œ ë¹„êµ

## ì˜ˆì œ íŠ¸ë¦¬ êµ¬ì¡°

```bash
main (Main command group)
â”œâ”€â”€ hello (Hello command)
â””â”€â”€ sub (Subcommand group)
    â”œâ”€â”€ goodbye (Goodbye command)
    â””â”€â”€ seeyouagain (Seeyouagain command)
```
- main ê·¸ë£¹: ìµœìƒìœ„ ëª…ë ¹ì–´ ê·¸ë£¹.
    - hello ëª…ë ¹ì–´: main ê·¸ë£¹ì— ì†í•œ ëª…ë ¹ì–´.
    - sub ê·¸ë£¹: main ê·¸ë£¹ì— ì†í•œ í•˜ìœ„ ê·¸ë£¹.
        - goodbye ëª…ë ¹ì–´: sub ê·¸ë£¹ì— ì†í•œ ëª…ë ¹ì–´.
        - seeyouagain ëª…ë ¹ì–´: sub ê·¸ë£¹ì— ì†í•œ ëª…ë ¹ì–´.

## 1) ë°ì½”ë ˆì´í„°ë¥¼ ì‚¬ìš©í•˜ì—¬ ëª…ë ¹ì–´ ì¶”ê°€

```python
import click


@click.group(name='main')
def cli() -> None:
    """
    Main command group.
    """
    pass

@click.group(name='sub')
def sub_group() -> None:
    """
    Subcommand group.
    """
    pass

@cli.command()
def hello() -> None:
    """
    Hello command.
    """
    click.echo("Hello, World!")

@sub_group.command()
def goodbye() -> None:
    """
    Goodbye command.
    """
    click.echo("Goodbye, World!")

@sub_group.command()
def seeyouagain() -> None:
    """
    Seeyouagain command.
    """
    click.echo("See you again!")

# Add the subcommand group to the main CLI group
cli.add_command(sub_group)

if __name__ == '__main__':
    cli()
```

## 2) ëª…ì‹œì ìœ¼ë¡œ ëª…ë ¹ì–´ ì¶”ê°€ (`add_command()` ë©”ì„œë“œ ì‚¬ìš©)

```python
import click


@click.group(name='main')
def cli() -> None:
    """
    Main command group.
    """
    pass

@click.group(name='sub')
def sub_group() -> None:
    """
    Subcommand group.
    """
    pass

@click.command()
def hello() -> None:
    """
    Hello command.
    """
    click.echo("Hello, World!")

@click.command()
def goodbye() -> None:
    """
    Goodbye command.
    """
    click.echo("Goodbye, World!")

@click.command()
def seeyouagain() -> None:
    """
    Seeyouagain command.
    """
    click.echo("See you again!")

# Add the hello command to the main CLI group
cli.add_command(hello)

# Add the goodbye and seeyouagain commands to the subcommand group
sub_group.add_command(goodbye)
sub_group.add_command(seeyouagain)

# Add the subcommand group to the main CLI group
cli.add_command(sub_group)

if __name__ == '__main__':
    cli()
```

<br>

# 4. ë””ë²„ê¹… ë° ì‹¤í–‰

ì‹¤í–‰ íŒŒì¼ ì´ë¦„: `clicktest.py`

## 1) ë””ë²„ê±° ì„¤ì •

`.vscode/launch.json` ì„¤ì •

```json
{
    "version": "0.2.0",
    "configurations": [
        {
            "name": "Python: Click Debug",
            "type": "debugpy",
            "request": "launch",
            "program": "${workspaceFolder}/clicktest.py",
            "args": [
                "hello"
            ],
            "console": "integratedTerminal"
        },
        {
            "name": "Python: Click Debug (Subcommand)",
            "type": "debugpy",
            "request": "launch",
            "program": "${workspaceFolder}/clicktest.py",
            "args": [
                "sub",
                "goodbye"
            ],
            "console": "integratedTerminal"
        }
    ]
}
```

## 2) ì‹¤í–‰
```bash
python clicktest.py hello  # "Hello, World!" ì¶œë ¥
```
```bash
python clicktest.py sub goodbye  # "Goodbye, World!" ì¶œë ¥
```

## ğŸ™‹ ê¶ê¸ˆê¶ê¸ˆ

    â“ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•  ë•Œ ìµœìƒìœ„ ê·¸ë£¹(main)ì€ ì™œ ë¹ ì§ˆê¹Œ?

    ğŸ’¡ ê·¸ ì´ìœ ëŠ” click ëª…ë ¹ì–´ ê·¸ë£¹ êµ¬ì¡°ì™€ ê´€ë ¨ì´ ìˆë‹¤!

    main ê·¸ë£¹ì€ ìµœìƒìœ„ ê·¸ë£¹ìœ¼ë¡œ, CLI í”„ë¡œê·¸ë¨ì„ ì‹¤í–‰í•  ë•Œ ê¸°ë³¸ì ìœ¼ë¡œ í˜¸ì¶œë˜ëŠ” ê·¸ë£¹ì´ë‹¤.
    ë”°ë¼ì„œ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•  ë•ŒëŠ” ìµœìƒìœ„ ê·¸ë£¹ì˜ ì´ë¦„ì„ ëª…ì‹œí•  í•„ìš”ê°€ ì—†ë‹¤.

- ìµœìƒìœ„ ê·¸ë£¹(main)ì€ ê¸°ë³¸ì ìœ¼ë¡œ í”„ë¡œê·¸ë¨ì˜ ì—”íŠ¸ë¦¬ í¬ì¸íŠ¸ ì—­í• ì„ í•œë‹¤.
- ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•  ë•ŒëŠ” ìµœìƒìœ„ ê·¸ë£¹ì˜ ì´ë¦„ì„ ëª…ì‹œí•  í•„ìš”ê°€ ì—†ë‹¤.
- í•˜ìœ„ ê·¸ë£¹ì˜ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•  ë•ŒëŠ” í•˜ìœ„ ê·¸ë£¹ì˜ ì´ë¦„ì„ ëª…ì‹œí•´ì•¼ í•œë‹¤.
